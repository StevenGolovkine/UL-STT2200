<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">
<head>
<link rel="alternate" hreflang="fr" href="https://stt2200.netlify.app/contents/dimension/01-pca.html" />
<link rel="alternate" hreflang="en" href="https://stt2200.netlify.app/en/contents/dimension/01-pca.en.html" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Analyse en composantes principales – STT-2200: Analyse de données</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>
<script src="../../site_libs/quarto-nav/quarto-nav.js"></script><script src="../../site_libs/clipboard/clipboard.min.js"></script><script src="../../site_libs/quarto-search/autocomplete.umd.js"></script><script src="../../site_libs/quarto-search/fuse.min.js"></script><script src="../../site_libs/quarto-search/quarto-search.js"></script><meta name="quarto:offset" content="../../">
<link href="../../contents/dimension/02-ca.html" rel="next">
<link href="../../contents/04-dimension.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script><script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script><script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script><script src="../../site_libs/quarto-html/popper.min.js"></script><script src="../../site_libs/quarto-html/tippy.umd.min.js"></script><script src="../../site_libs/quarto-html/anchor.min.js"></script><link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-b651517ce65839d647a86e2780455cfb.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script><link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-e82d229c0ce9f26e18be7e528ebfaede.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-14633c6173d11ae2422085e82a060846.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/bootstrap/bootstrap-e82d229c0ce9f26e18be7e528ebfaede.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer",
    "search-label": "Recherche"
  }
}</script><style>html{ scroll-behavior: smooth; }</style>
<script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script><meta property="og:title" content="Analyse en composantes principales – STT-2200: Analyse de données">
<meta property="og:description" content="">
<meta property="og:site_name" content="STT-2200: Analyse de données">
</head>
<body class="nav-sidebar floating quarto-light">
<script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script><div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb">
<li class="breadcrumb-item"><a href="../../contents/01-introduction.html">Modules</a></li>
<li class="breadcrumb-item"><a href="../../contents/04-dimension.html">04 - Dimension</a></li>
<li class="breadcrumb-item"><a href="../../contents/dimension/01-pca.html">Analyse en composantes principales</a></li>
</ol></nav><a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Recherche" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../../index.html" class="sidebar-logo-link">
      <img src="../.././include/logo.png" alt="" class="sidebar-logo light-content py-0 d-lg-inline d-none"><img src="../.././include/logo.png" alt="" class="sidebar-logo dark-content py-0 d-lg-inline d-none"></a>
      <div class="sidebar-tools-main">
    <a href="https://github.com/StevenGolovkine/UL-STT2200" title="Github organization" class="quarto-navigation-tool px-1" aria-label="Github organization"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Basculer le mode sombre"><i class="bi"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Recherche"></div>
        </div>
        </div>
    <div class="dropdown" id="languages-links-parent">
<button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="languages-button"><i class="bi bi-globe2"></i> Français</button><ul class="dropdown-menu" id="languages-links"><li><a class="dropdown-item" href="https://stt2200.netlify.app/en/contents/dimension/01-pca.html" id="language-link-en">English</a></li></ul>
</div>
<div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Informations</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../informations/general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Générales</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../informations/description.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Description</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../informations/schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Plan</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../informations/evaluations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Évaluations</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../informations/mcq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">QCM</span></a>
  </div>
</li>
      </ul>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../informations/materials.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Matériel</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../informations/cours.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cours</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Modules</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/01-introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01 - Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../contents/02-revisions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">02 - Révisions</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" role="navigation" aria-expanded="false" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/remainders/01-linear-algebra.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Algèbre linéaire</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/remainders/02-probabilities.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Probabilités et Statistiques</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/remainders/03-programming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programmation</span></a>
  </div>
</li>
      </ul>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../contents/03-generalities.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">03 - Généralités</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" role="navigation" aria-expanded="false" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/generalities/01-stat.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Projet d’analyse de données</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/generalities/02-spaces.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Espaces</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/generalities/03-distance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Distances</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/generalities/04-bias-variance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Biais/Variance</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/generalities/05-model-evaluation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Évaluation de modèles</span></a>
  </div>
</li>
      </ul>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../contents/04-dimension.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">04 - Dimension</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#" role="navigation" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/dimension/01-pca.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Analyse en composantes principales</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/dimension/02-ca.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analyse factorielle des correspondances</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/dimension/03-mca.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analyse des correspondances multiples</span></a>
  </div>
</li>
      </ul>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../contents/05-supervisee.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">05 - Supervisée</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" role="navigation" aria-expanded="false" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/supervised/01-discriminant.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analyse discriminante</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/supervised/02-tree.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Arbres</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/supervised/03-ensemble.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Méthodes ensemblistes</span></a>
  </div>
</li>
      </ul>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../contents/06-nonsupervisee.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">06 - Non-supervisée</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" role="navigation" aria-expanded="false" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/unsupervised/01-kmeans.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="math inline">\(k\)</span>-means</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/unsupervised/02-hierarchy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Méthodes hiérarchiques</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/unsupervised/03-gaussian-mixtures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mélange de gaussiennes</span></a>
  </div>
</li>
      </ul>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/07-further.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">07 - Éthique</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/08-conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">08 - Conclusion</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Sur cette page</h2>
   
  <ul>
<li><a href="#pourquoi-changer-de-dimension" id="toc-pourquoi-changer-de-dimension" class="nav-link active" data-scroll-target="#pourquoi-changer-de-dimension">Pourquoi changer de dimension ?</a></li>
  <li>
<a href="#analyse-en-composantes-principales" id="toc-analyse-en-composantes-principales" class="nav-link" data-scroll-target="#analyse-en-composantes-principales">Analyse en composantes principales</a>
  <ul class="collapse">
<li><a href="#formulation-math%C3%A9matique" id="toc-formulation-mathématique" class="nav-link" data-scroll-target="#formulation-mathématique">Formulation mathématique</a></li>
  </ul>
</li>
  <li>
<a href="#pratique-de-lacp" id="toc-pratique-de-lacp" class="nav-link" data-scroll-target="#pratique-de-lacp">Pratique de l’ACP</a>
  <ul class="collapse">
<li><a href="#estimation-de-la-matrice-de-variance-covariance" id="toc-estimation-de-la-matrice-de-variance-covariance" class="nav-link" data-scroll-target="#estimation-de-la-matrice-de-variance-covariance">Estimation de la matrice de variance-covariance</a></li>
  <li><a href="#quelques-remarques" id="toc-quelques-remarques" class="nav-link" data-scroll-target="#quelques-remarques">Quelques remarques</a></li>
  <li><a href="#choix-du-nombre-de-composantes" id="toc-choix-du-nombre-de-composantes" class="nav-link" data-scroll-target="#choix-du-nombre-de-composantes">Choix du nombre de composantes</a></li>
  </ul>
</li>
  </ul>
<div class="toc-actions"><ul>
<li><a href="https://github.com/StevenGolovkine/UL-STT2200/issues/new" class="toc-action"><i class="bi bi-github"></i>Faire part d'un problème</a></li>
<li><a href="https://github.com/StevenGolovkine/UL-STT2200/blob/main/contents/dimension/01-pca.qmd" class="toc-action"><i class="bi empty"></i>Voir la source</a></li>
</ul></div>
<div class="quarto-alternate-formats">
<h2>Autres formats</h2>
<ul><li><a href="01-pca.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul>
</div></nav>
</div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb">
<li class="breadcrumb-item"><a href="../../contents/01-introduction.html">Modules</a></li>
<li class="breadcrumb-item"><a href="../../contents/04-dimension.html">04 - Dimension</a></li>
<li class="breadcrumb-item"><a href="../../contents/dimension/01-pca.html">Analyse en composantes principales</a></li>
</ol></nav><div class="quarto-title">
<h1 class="title">Analyse en composantes principales</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="pourquoi-changer-de-dimension" class="level2"><h2 class="anchored" data-anchor-id="pourquoi-changer-de-dimension">Pourquoi changer de dimension ?</h2>
<p>Travailler avec un grand nombre de variables peut poser plusieurs problèmes pratiques et théorique :</p>
<ul>
<li><p>Visualisation compliquée : il est impossible de représenter visuellement des données au-delà de 3 dimensions.</p></li>
<li><p>Séparation des classes difficile : dans des problèmes de classification, la séparation entre les groupes peut être cachée dans une combinaison de variables plutôt que dans les variables prises individuellement.</p></li>
<li><p>Coût computationnel élévé : des modèles complexes peuvent devenir difficiles à ajuster lorsque le nombre de variables est grand.</p></li>
<li><p>Corrélations fortes : des variables redondantes rendent les modèles instables ou difficiles à interpréter.</p></li>
</ul>
<p>La question naturelle à se poser est donc : peut-on réduire la dimension du jeu de données sans perdre trop d’information ?</p>
<p>Réduire la dimension, ce n’est pas simplement la suppression de variables. En effet, cela risquerait de faire disparaître de l’information pouvant être utile au modèle. Une meilleure approche consiste à construire de nouvelles variables, obtenues comme combinaisons linéaires des variables initiales, qui résument l’information essentielle du jeu de données. Une méthode possible pour cela est l’<strong>Analyse en Composantes Principales</strong> (ACP).</p>
</section><section id="analyse-en-composantes-principales" class="level2"><h2 class="anchored" data-anchor-id="analyse-en-composantes-principales">Analyse en composantes principales</h2>
<p>L’ACP est une méthode non-supervisée (sans variables à expliquer) permettant de réduire la dimension d’un jeu de données tout en conservant le plus d’information possible. Cette méthode est utilisée lorsque l’on dispose de <span class="math inline">\(n\)</span> observations de <span class="math inline">\(p\)</span> variables numériques continues avec <span class="math inline">\(p\)</span> trop “grand” pour permettre une modélisation ou une visualisation efficace. La méthode a été introduite par dans <span class="citation" data-cites="hotellingAnalysisComplexStatistical1933">Hotelling (<a href="#ref-hotellingAnalysisComplexStatistical1933" role="doc-biblioref">1933</a>)</span>.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Astuce</span>Applications courantes
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>Visualisation d’un jeu de données multidimensionnelles.</p></li>
<li><p>Réduction du nombre de variables de <span class="math inline">\(p\)</span> à <span class="math inline">\(k \ll p\)</span> pour faciliter la construction de modèle.</p></li>
<li><p>Compression d’images ou de signaux.</p></li>
<li><p>Exploration de données biologiques, textuelles ou environnementales.</p></li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Exemples
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>Comparer des équipes de hockey sur la base de six statistiques de fin de saison.</p></li>
<li><p>Résumer la criminalité entre les provinces canadiennes sur la base des taux de sept types de crimes différents.</p></li>
<li><p>Compresser des images formées de <span class="math inline">\(1084 \times 1084\)</span> pixels en quelques variables.</p></li>
<li><p>Identifier le nombre de variantes d’un type de tumeur à partir du degré d’expression de millions de gènes.</p></li>
</ol>
</div>
</div>
<section id="formulation-mathématique" class="level3"><h3 class="anchored" data-anchor-id="formulation-mathématique">Formulation mathématique</h3>
<p>Soit un vecteur aléatoire composé de <span class="math inline">\(p\)</span> variables <span class="math inline">\(X = \left( X_{1}, \dots, X_p \right)^{\top}\)</span>, centré et ayant comme matrice de variance-covariance <span class="math inline">\(\Sigma\)</span>. Notons <span class="math inline">\(\alpha_{1} = \left( \alpha_{11}, \dots, \alpha_{1p} \right)^{\top}\)</span>, un vecteur de coefficients. On cherche une combinaison linéaire</p>
<p><span class="math display">\[Y_{1} = \alpha_{1}^{\top} X = \sum_{k = 1}^{p} \alpha_{1k}X_k,\]</span></p>
<p>telle que la variance de <span class="math inline">\(Y_{1}\)</span> soit maximale. L’idée est simple: on désire combiner <span class="math inline">\(p\)</span> variables en une seule, mais en “capturant” la plus grande partie possible de la variabilité.</p>
<p>Il faut d’abord ajouter une contrainte sur <span class="math inline">\(\alpha_{1}\)</span>, puisque sinon on n’aurait qu’à prendre <span class="math inline">\(\alpha_{1k} = \pm \infty\)</span> et on aurait <span class="math inline">\(\mathrm{Var}(Y_{1}) = +\infty\)</span> ce qui est définitivement maximal ! On contraint donc <span class="math inline">\(\alpha_{1}\)</span> de sorte qu’il ait une norme égale à <span class="math inline">\(1\)</span>.</p>
<p>Cela revient à calculer : <span class="math display">\[\max_{\alpha_1^\top \alpha_1 = 1} \mathrm{Var}(Y_1) = \max_{\alpha_1^\top \alpha_1 = 1} \alpha_1^\top \Sigma \alpha_{1}.\]</span></p>
<p>Ce problème se résout par les multiplicateurs de Lagrange. Il conduit à l’équation <span class="math display">\[\Sigma \alpha_1 = \lambda_{1} \alpha_{1},\]</span> où <span class="math inline">\(\lambda_{1}\)</span> est la plus grande valeur propre de <span class="math inline">\(\Sigma\)</span> et <span class="math inline">\(\alpha_{1}\)</span> le vecteur propre associé.</p>
<p>On définit ainsi la première composante principale. On construit les suivantes en imposant des conditions d’orthogonalité (indépendance linéaire) avec les précédentes, ce qui revient à chercher les vecteurs propres suivants : <span class="math display">\[\Sigma \alpha_k = \lambda_k \alpha_k, \quad \text{avec}\quad \lambda_{1} \geq \lambda_2 \geq \dots \lambda_p.\]</span> Les composantes principales sont donc données par <span class="math display">\[Y_k = \alpha_k^\top X, \quad\text{avec } \alpha_k \text{ vecteur propre associé à } \lambda_k.\]</span></p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Astuce</span>Remarque
</div>
</div>
<div class="callout-body-container callout-body">
<p>Si <span class="math inline">\(\lambda_{1} &gt; \dots &gt; \lambda_{p}\)</span>, alors les composantes principales sont uniques, à un signe près.</p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Preuve
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>On cherche à calculer <span class="math display">\[\max_{\alpha_1^\top \alpha_1 = 1} \mathrm{Var}(Y_1) = \max_{\alpha_1^\top \alpha_1 = 1} \alpha_1^\top \Sigma \alpha_{1}.\]</span></p>
<p>Le problème est donc de maximiser <span class="math display">\[F(\alpha_{1}) = \alpha_{1}^\top \Sigma \alpha_1, \quad\text{s.c.}\quad \alpha_1^\top \alpha_1 = 1.\]</span></p>
<p>On peut récrire ce problème à l’aide des multiplicateurs de Lagrange, soit maximiser <span class="math display">\[F(\alpha_1, \lambda) = \alpha_1^\top \Sigma \alpha_1 - \lambda (\alpha_1^\top \alpha_1 -1 ),\]</span> où <span class="math inline">\(\lambda\)</span> est un multiplicateur de Lagrange.</p>
<p>Pour solutionner ce problème, on dérive <span class="math inline">\(F\)</span> par rapport à <span class="math inline">\(\alpha_{1}\)</span> et à <span class="math inline">\(\lambda\)</span>.</p>
<p><span class="math display">\[\begin{cases}
\frac{\partial F(\alpha_{1}, \lambda)}{\partial \alpha_{1}} = 2 \Sigma \alpha_{1} - 2 \lambda \alpha_{1},\\
\frac{\partial F(\alpha_{1}, \lambda)}{\partial \lambda} = 1 - \alpha_{1}^\top \alpha_{1}.
\end{cases}
\]</span></p>
<p>Ensuite, on égalise à <span class="math inline">\(0\)</span>, ce qui donne: <span class="math display">\[\begin{cases}
\Sigma \alpha_{1} = \lambda \alpha_{1} \\
\alpha_{1}^\top \alpha_{1} = 1
\end{cases}
.\]</span> La seconde équation est bien entendue notre contrainte. La première équation est celle qui nous intéresse. En utilisant cette équation et la définition des éléments propres, on déduit que</p>
<ol type="1">
<li><p><span class="math inline">\(\alpha_{1}\)</span> est un vecteur propre (normé) de <span class="math inline">\(\Sigma\)</span>;</p></li>
<li><p><span class="math inline">\(\lambda\)</span> est la valeur propre correspondante.</p></li>
</ol>
<p>On a donc que <span class="math display">\[\mathrm{Var}(Y_{1}) = \alpha_{1}^\top \Sigma \alpha_{1} = \lambda \alpha_{1}^\top \alpha_1 = \lambda.\]</span> Puisque l’on veut maximiser cette quantité, on conclut que:</p>
<ol type="1">
<li><p><span class="math inline">\(\lambda = \lambda_{1}\)</span>, la plus grande valeur propre de <span class="math inline">\(\Sigma\)</span>;</p></li>
<li><p><span class="math inline">\(\alpha_{1}\)</span>, le vecteur propre normé correspondant.</p></li>
</ol>
<p>On continue ensuite avec le calcul de la deuxième composante. Ici, on poursuit simultanément deux objectifs:</p>
<ol type="1">
<li><p>Conserver le maximum de variation présente dans <span class="math inline">\(X\)</span>;</p></li>
<li><p>Simplifier la structure de dépendance pour faciliter l’interprétation et assurer la stabilité numérique d’éventuelles méthodes qui utiliseront les composantes principales obtenues.</p></li>
</ol>
<p>Étant donné <span class="math inline">\(Y_{1}\)</span>, la deuxième composante principale <span class="math inline">\(Y_{2} = \alpha_{2}^\top X\)</span> est définie telle que</p>
<ol type="1">
<li><p><span class="math inline">\(\mathrm{Var}(Y_{2}) = \alpha_{2}^\top \Sigma \alpha_{2}\)</span> est maximale;</p></li>
<li><p><span class="math inline">\(\alpha_{2}^\top \alpha_{2} = 1\)</span>;</p></li>
<li><p><span class="math inline">\(\mathrm{Cov}(Y_{1}, Y_{2}) = 0\)</span>.</p></li>
</ol>
<p>Or, on a que <span class="math display">\[\mathrm{Cov}(Y_{1}, Y_{2}) = \mathrm{Cov}(\alpha_{1}^\top X, \alpha_{2}^\top X) = \alpha_{1}^\top \Sigma \alpha_{2} = \alpha_{2}^\top \Sigma \alpha_{1} = \lambda_{1} \alpha_{2}^\top \alpha_{1}.\]</span></p>
<p>On cherche donc le vecteur <span class="math inline">\(\alpha_{2}\)</span> qui maximise: <span class="math display">\[F(\alpha_{2}, \lambda, \kappa) = \alpha_{2}^\top \Sigma \alpha_{2} - \lambda (\alpha_{2}^\top \alpha_{2} - 1) - \kappa (\alpha_{2}^\top \alpha_{1} - 0).\]</span></p>
<p>De même que pour la première composante, on dérive <span class="math inline">\(F\)</span> par rapport à <span class="math inline">\(\alpha_{2}\)</span>, <span class="math inline">\(\lambda\)</span> et <span class="math inline">\(\kappa\)</span>.</p>
<p><span class="math display">\[\begin{cases}
\frac{\partial F(\alpha_{2}, \lambda, \kappa)}{\partial \alpha_{2}} = 2 \Sigma \alpha_{2} - 2 \lambda \alpha_{2} - \kappa \alpha_1 \\
\frac{\partial F(\alpha_{2}, \lambda, \kappa)}{\partial \lambda} = 1 - \alpha_{2}^\top \alpha_{2} \\
\frac{\partial F(\alpha_{2}, \lambda, \kappa)}{\partial \kappa} = - \alpha_2^\top \alpha_1
\end{cases}
\]</span></p>
<p>En égalisant les équations à <span class="math inline">\(0\)</span>, on retrouve les deux équations des contraintes, ainsi que</p>
<p><span class="math display">\[2 \Sigma \alpha_{2} - 2 \lambda \alpha_{2} - \kappa \alpha_{1} = 0.\]</span></p>
<p>En multipliant cette équation à gauche et à droite par <span class="math inline">\(\alpha_{1}^\top\)</span>, on trouve</p>
<p><span class="math display">\[2 \alpha_{1}^\top \Sigma \alpha_{2} - 2 \alpha_{1}^\top \lambda \alpha_{2} - \kappa \alpha_{1}^\top \alpha_{1} = 0.\]</span></p>
<p>Or <span class="math inline">\(\alpha_{1}^\top \Sigma = \lambda_{1} \alpha_{1}^\top\)</span>, et <span class="math inline">\(\alpha_{1}^\top \alpha_{1} = 1\)</span>, donc <span class="math display">\[2 \alpha_{1}^\top \lambda \alpha_{2} - 2 \alpha_{1}^\top \lambda \alpha_{2} - \kappa \alpha_{1}^\top \alpha_{1} = 0 \implies - \kappa = 0.\]</span></p>
<p>En substituant ce résulat, on obtient <span class="math display">\[\Sigma \alpha_{2} = \lambda \alpha_{2}.\]</span></p>
<p>et donc <span class="math inline">\(\lambda\)</span> est une autre valeur propre de <span class="math inline">\(\Sigma\)</span>. Puisque <span class="math display">\[\mathrm{Var}(Y_{2}) = \alpha_{2}^\top \Sigma \alpha_{2} = \alpha_{2}^\top \lambda \alpha_{2} = \lambda,\]</span> on a que cette variance est maximale si <span class="math inline">\(\lambda = \lambda_{2}\)</span>, la deuxième plus grande valeur propre de <span class="math inline">\(\Sigma\)</span>, et conséquemment <span class="math inline">\(\alpha_{2}\)</span> est le vecteur propre normé correspondant.</p>
<p>On peut généraliser ce résultat en utilisant des maximisations successives. On en conclut que <span class="math display">\[Y_k = \alpha_k^\top X,\]</span> où <span class="math inline">\(\alpha_k\)</span> est le vecteur propre normé associé à <span class="math inline">\(\lambda_k\)</span>, la <span class="math inline">\(k\)</span>e plus grande valeur propre de <span class="math inline">\(\Sigma\)</span>.</p>
</div>
</div>
</div>
<p>Il est possible d’avoir une représentation plus compacte de l’ACP à l’aide de matrices. Soit <span class="math inline">\(A = \left( \alpha_{1}, \dots, \alpha_p \right) \in \mathbb{R}^{p \times p}\)</span>, la matrice dont les colonnes sont les vecteurs propres. On a <span class="math inline">\(Y = AX\)</span> et la covariance des composantes principales s’écrit <span class="math display">\[\mathrm{Var}(Y) = A^\top \Sigma A.\]</span></p>
<div class="callout callout-style-default callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Important</span>Propriétés de <span class="math inline">\(A\)</span>
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><span class="math inline">\(A^{\top} A = A A^{\top} = I_p\)</span>;</p></li>
<li><p><span class="math inline">\(A^{\top} = A^{-1}\)</span>;</p></li>
<li><p><span class="math inline">\(\Sigma A = A \Lambda\)</span>, où <span class="math inline">\(\Lambda = \text{diag}(\lambda_{1}, \dots, \lambda_p)\)</span>;</p></li>
<li><p><span class="math inline">\(\mathrm{Var}(Y) = A^{\top} \Sigma A = \Lambda \implies \mathrm{Cov}(Y_k, Y_l) = 0\)</span> si <span class="math inline">\(k \neq l\)</span> et <span class="math inline">\(\mathrm{Var}(Y_k) = \lambda_k \geq \mathrm{Var}(Y_l) = \lambda_l\)</span> si et seulement si <span class="math inline">\(k \geq l\)</span>.</p></li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Preuves
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>Par construction, les colonnes de <span class="math inline">\(A\)</span> sont orthogonaux deux à deux et de norme <span class="math inline">\(1\)</span> (cf. contraintes sur les vecteurs propres). La matrice <span class="math inline">\(A\)</span> est donc une matrice orthogonale. Et donc <span class="math inline">\(A^{\top} A = A A^{\top} = I_p\)</span>.</p></li>
<li><p>De même, comme <span class="math inline">\(A\)</span> est orthogonal, on a <span class="math inline">\(A^{\top} = A^{-1}\)</span>.</p></li>
<li><p>Le résultat est immédiat en faisant le produit de matrices.</p></li>
<li><p>On a <span class="math inline">\(\mathrm{Var}(Y) = A^{\top} \Sigma A = A^{\top} A \Lambda = \Lambda\)</span>. Comme <span class="math inline">\(\Lambda\)</span> est une matrice diagonale, <span class="math inline">\(\mathrm{Cov}(Y_k, Y_l) = 0\)</span> si <span class="math inline">\(k \neq l\)</span> (car pas sur la diagonale) et comme <span class="math inline">\(\lambda_{1} \geq \dots \geq \lambda_p\)</span>, on a <span class="math inline">\(\mathrm{Var}(Y_1) \geq \dots \geq \mathrm{Var}(Y_p)\)</span>.</p></li>
</ol>
</div>
</div>
</div>
<p>Une mesure globale de la variation presente dans les données est donnée par la trace de la matrice <span class="math inline">\(\Sigma\)</span>: <span class="math display">\[\text{tr}(\Sigma) = \text{tr}(\Lambda) = \sum_{i = 1}^{p} \lambda_i = \sum_{k = 1}^{p} \mathrm{Var}(Y_k).\]</span></p>
<p>La proportion de variation expliquée par la composante principale <span class="math inline">\(Y_k\)</span> est donc donnée par le ratio entre la valeur propre <span class="math inline">\(k\)</span> et la somme des valeurs propres : <span class="math display">\[\frac{\lambda_k}{\lambda_{1} + \cdots + \lambda_p} = \frac{\mathrm{Var}(Y_k)}{\text{tr}(\Sigma)}.\]</span></p>
<p>De façon similaire, les <span class="math inline">\(m\)</span> premières composantes expliquent <span class="math display">\[100\% \times \frac{\sum_{k = 1}^{m} \lambda_k}{\sum_{k = 1}^{p} \lambda_k} = 100\% \times \frac{\sum_{k = 1}^{m} \mathrm{Var}(Y_k)}{\sum_{k = 1}^{p} \mathrm{Var}(Y_k)}\]</span> de la variabilité dans les variables.</p>
</section></section><section id="pratique-de-lacp" class="level2"><h2 class="anchored" data-anchor-id="pratique-de-lacp">Pratique de l’ACP</h2>
<section id="estimation-de-la-matrice-de-variance-covariance" class="level3"><h3 class="anchored" data-anchor-id="estimation-de-la-matrice-de-variance-covariance">Estimation de la matrice de variance-covariance</h3>
<p>En pratique, la matrice de variance-covariance <span class="math inline">\(\Sigma\)</span> est inconnue. Pour faire une ACP, il est nécessaire d’estimer <span class="math inline">\(\Sigma\)</span> à partir d’un échantillon aléatoire <span class="math inline">\(X_{1}, \dots, X_n\)</span> de réalisation indépendante de <span class="math inline">\(X\)</span>. Un estimateur (sans biais) de <span class="math inline">\(\Sigma\)</span> est donné par <span class="math display">\[\widehat{\Sigma} = \frac{1}{n - 1} \sum_{i = 1}^{n} \left( X_i - \overline{X} \right)\left( X_i - \widehat{X} \right)^{\top},\]</span> où <span class="math inline">\(\overline{X}\)</span> est la moyenne empirique de l’échantillon.</p>
<p>La matrice <span class="math inline">\(\widehat{\Sigma}\)</span> ainsi obtenue est symétrique à coefficients réels donc diagonalisable. Elle admet une décomposition spectrale de la forme <span class="math display">\[\widehat{\Sigma} = \widehat{A} \widehat{\Lambda} \widehat{A}^{\top},\]</span> où <span class="math inline">\(\widehat{A}\)</span> est une matrice orthogonale dont les colonnes sont les estimateurs des vecteurs propres de <span class="math inline">\(\Sigma\)</span> et <span class="math inline">\(\widehat{\Lambda}\)</span> est une matrice diagonale contenant les estimateurs des valeurs propres de <span class="math inline">\(\Sigma\)</span>, supposées ordonnées de façon décroissante.</p>
<p>Les composantes principales sont obtenues en projetant les observations <span class="math inline">\(X_i\)</span> dans la base des vecteurs propres : <span class="math display">\[Y_i = \widehat{A}^{\top} X_i.\]</span></p>
</section><section id="quelques-remarques" class="level3"><h3 class="anchored" data-anchor-id="quelques-remarques">Quelques remarques</h3>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Astuce</span>Sensibilité à l’échelle de <span class="math inline">\(X_1, \dots, X_p\)</span>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Puisque l’on cherche une combinaison linéaire de <span class="math inline">\(X_{1}, \dots, X_p\)</span> qui maximise la variance, une variable <span class="math inline">\(X_k\)</span> ayant une grande variance aura un poids démesuré dans les composantes principales, ce qui peut fausser l’interprétation. On peut, par exemple, penser à la mesure de distance. En effet, exprimer une distance entre mètres plutôt qu’en kilomètres multiplierait la variance de cette variable par <span class="math inline">\(1\)</span> million (<span class="math inline">\((10^3)^2\)</span>). Cette variable aurait donc un poids majeur dans toutes les composantes.</p>
<p>Ainsi, si les variables sont exprimées dans des unités différentes ou présentent des ordres de grandeurs très variés, il est recommandé de standardiser les variables avant d’effectuer une ACP. Cela revient à effectuer une ACP sur la matrice des corrélations.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Astuce</span>Première étape dans une analyse prédictive
</div>
</div>
<div class="callout-body-container callout-body">
<p>Il arrive que l’ACP soit effectuée parce que l’on veuille prédire la valeur de variable <span class="math inline">\(Z\)</span> à partir des valeurs de variables <span class="math inline">\(X_{1}, \dots, X_p\)</span> mais que <span class="math inline">\(p\)</span> soit simplement trop grand. Dans ce cas, on applique l’ACP pour obtenir les <span class="math inline">\(k \ll p\)</span> premières composantes principales <span class="math inline">\(Y_1, \dots, Y_k\)</span> et on les utilise pour prédire <span class="math inline">\(Z\)</span>.</p>
<p>Puisque les composantes principales retiennent la majeure partie de l’information contenue dans les variables originales, c’est généralement une façon raisonnable de faire.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Astuce</span>Rotation des axes et qualité de représentation
</div>
</div>
<div class="callout-body-container callout-body">
<p>Puisque la matrice <span class="math inline">\(A\)</span> est orthogonale, le produit matriciel <span class="math inline">\(Y = A^{\top}X\)</span> représente une rotation de l’espace des variables. Les nouveaux axes correspondent aux directions orthogonales de variation maximale successives, en supposant que <span class="math inline">\(\lambda_{1} &gt; \dots &gt; \lambda_p\)</span>. Ainsi, <span class="math inline">\(Y_i = A^{\top} X_i\)</span> donne les coordonnées de l’observation <span class="math inline">\(X_i\)</span> dans le nouveau système d’axes. On appelle <span class="math inline">\(Y_{ik}\)</span> le score de l’observation <span class="math inline">\(X_i\)</span> sur l’axe principal <span class="math inline">\(k\)</span> et se calcule comme <span class="math display">\[Y_{ik} = \alpha_k^\top X_i = \sum_{l = 1}^{p} \alpha_{kl}X_{il}.\]</span></p>
<p>La qualité de la représentation de l’observation <span class="math inline">\(i\)</span> sur l’axe <span class="math inline">\(k\)</span> est donnée par <span class="math display">\[Q_{ik} = \frac{Y_{ik}^2}{d^2(0, Y_i)} = \frac{Y_{ik}^2}{\sqrt{Y_{i1}^2 + \dots + Y_{i p}^2}}.\]</span></p>
</div>
</div>
</section><section id="choix-du-nombre-de-composantes" class="level3"><h3 class="anchored" data-anchor-id="choix-du-nombre-de-composantes">Choix du nombre de composantes</h3>
<p>Un enjeu central en ACP est de choisir combien de composantes principales retenir. En conserver trop ne réduit pas la dimension et en conserver trop peu peut faire perdre de l’information pertinente. Voici les principales règles empiriques utilisées :</p>
<ol type="1">
<li><p><strong>Règle des <span class="math inline">\(80\%\)</span></strong> : Retenir le nombre minimal de composantes nécessaires pour expliquer au moins <span class="math inline">\(80\%\)</span> de la variance totale. Ce seuil est arbitraire, mais il donne souvent une bonne intuition.</p></li>
<li><p><strong>Règle de Kaiser</strong> : Si l’ACP est faite à partir de la matrice des corrélations, alors la moyenne des valeurs propres vaut <span class="math inline">\(1\)</span>. On recommande de ne garder que les composantes ayant une valeur propre supérieure à la moyenne des valeurs propres, soit <span class="math inline">\(1\)</span>.</p></li>
<li><p><strong>Règle de Joliffe</strong> : Variante plus stricte de la règle de Kaiser, qui suggère de conserver les composantes avec une valeur propre supérieure à <span class="math inline">\(0.7\)</span> pour une ACP faite avec la matrice des corrélations.</p></li>
<li><p><strong>Règle de Cattell (ou du coude)</strong> : On trace les valeurs propres <span class="math inline">\(\lambda_k\)</span> en fonction de leur rang <span class="math inline">\(k\)</span> et on cherche un point de rupture dans la décroissance. Au-delà de ce point, les composantes supplémentaires expliquent peu de variance supplémentaire.</p></li>
</ol>
<p>Ces règles sont des outils d’aide à la décision, mais le choix du nombre de composantes dépend aussi du contexte, des objectifs de l’analyse, et de la facilité d’interprétation.</p>



</section></section><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">Les références</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-hotellingAnalysisComplexStatistical1933" class="csl-entry" role="listitem">
Hotelling, H. 1933. <span>« Analysis of a Complex of Statistical Variables into Principal Components »</span>. <em>Journal of Educational Psychology</em> 24 (6): 417‑41. <a href="https://doi.org/10.1037/h0071325">https://doi.org/10.1037/h0071325</a>.
</div>
</div></section></div></main><!-- /main --><script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copié");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copié");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/stt2200\.netlify\.app");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../../contents/04-dimension.html" class="pagination-link" aria-label="04 - Dimension">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">04 - Dimension</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../contents/dimension/02-ca.html" class="pagination-link" aria-label="Analyse factorielle des correspondances">
        <span class="nav-page-text">Analyse factorielle des correspondances</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
       
    </div>   
    <div class="nav-footer-center">
<p>2025 | <strong>Steven Golovkine</strong> | <a class="link-footer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></p>
<div class="toc-actions d-sm-block d-md-none"><ul>
<li><a href="https://github.com/StevenGolovkine/UL-STT2200/issues/new" class="toc-action"><i class="bi bi-github"></i>Faire part d'un problème</a></li>
<li><a href="https://github.com/StevenGolovkine/UL-STT2200/blob/main/contents/dimension/01-pca.qmd" class="toc-action"><i class="bi empty"></i>Voir la source</a></li>
</ul></div>
</div>
    <div class="nav-footer-right">
       
    </div>
  </div>
</footer><script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body>
</html>
